
clc
clear
close all

% -------------- 目标函数 --------------------
b = [ -1, 0, 0, 0, 0 ]' ;

% -------------- LP锥约束 --------------------
c.l  = [ 2.4, -2.4, 2.4 ]' ;
At.l = [ 0, 0, 0,    1,  0 ; ...
         0, 0, 0,    0, -1 ; ...
         0, 0, 0, -1.5,  1 ; ] ;
K.l = 3 ;

% -------------- SOCP锥约束 ------------------
% 第 1 个
P0 = [  1,  0, -1,  0 ; ...
        0,  1,  0, -1 ; ...
       -1,  0,  1,  0 ; ...
        0, -1,  0,  1 ; ] ;
q0 = [ 0, 0, 0, 0 ]' ;
r0 = 0 ;

c.q0 = [ 0                     ; ...
         pinv( P0^( 1/2 ) )*q0 ; ] ;
At.q0 = [ -1           , zeros( 1, 4 ) ; ...
          zeros( 4, 1 ), -P0^( 1/2 )   ; ] ;

K.q = [ 5 ] ;

% 第 2 个
P1 = [ 1/4, 0, 0, 0 ; ...
         0, 1, 0, 0 ; ...
         0, 0, 0, 0 ; ...
         0, 0, 0, 0 ; ] ;
q1 = [ -1/4, 0, 0, 0 ]' ;
r1 = -3/4 ;

c.q1 = [ ( q1'*pinv( P1 )*q1 - r1 )^( 1/2 ) ; ...
         pinv( P1^( 1/2 ) )*q1              ; ] ;
At.q1 = [ 0            , zeros( 1, 4 ) ; ...
          zeros( 4, 1 ), -P1^( 1/2 )   ; ] ;
K.q = [ K.q, 5 ] ;

% 第 3 个
P2 = [ 0, 0, 0, 0 ; ...
       0, 0, 0, 0 ; ...
       0, 0, 5, 3 ; ...
       0, 0, 3, 5 ; ] ;
q2 = [ 0, 0, -22, -26 ]' ;
r2 = 140 ;

c.q2 = [ ( q2'*pinv( P2 )*q2 - r2 )^( 1/2 )       ; ...
         pinv( P2^( 1/2 ) )*q2                    ; ] ;
At.q2 = [ 0            , zeros( 1, 4 ) ; ...
          zeros( 4, 1 ), -P2^( 1/2 )   ; ] ;
K.q = [ K.q, 5 ] ;

c  = [ c.l  ; ...
       c.q0 ; ...
       c.q1 ; ...
       c.q2 ; ] ;
A = [ At.l  ; ...
      At.q0 ; ...
      At.q1 ; ...
      At.q2 ; ] ;

problem.A = A' ;
problem.b = b ;
problem.c = c ;
problem.K = K ;
save problem problem

[ x,  y, info ] = sedumi( A, b, c, K )

fval = y(1)^2 + r0 - q0'*pinv( P0 )*q0





